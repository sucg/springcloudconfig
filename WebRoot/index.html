<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>websocket-client</title>
<script type="text/javascript" src="js/stomp.min.js"></script>
<script type="text/javascript">
	var client;
	function connectws() {
		//client = Stomp.client("ws://localhost:61614/");
		client = Stomp.client("ws://sunls-a-pc:8080/message/websocket");
// 		client = Stomp.client("ws://192.168.160.137:8080/message/websocket");
		client.connect('guest','guest', function(frame) {
			var wspath=document.getElementById("wspath").value;
			var childNode=document.createTextNode("websocket已连接");
			var parent=document.getElementById("messages");
			parent.appendChild(childNode);
			parent.appendChild(document.createElement("br"));
			/***
			client.subscribe("/queue/pc/"+wspath, function(message) {
				var msg=document.createTextNode("消息内容："+message.body);
				var parent=document.getElementById("messages");
				parent.appendChild(msg);
				parent.appendChild(document.createElement("br"));
			});
			
			***/
			client.subscribe("/topic/pc/"+wspath, function(message) {
				var msg=document.createTextNode("消息内容："+message.body);
				var parent=document.getElementById("messages");
				parent.appendChild(msg);
				parent.appendChild(document.createElement("br"));
			});
		});
	}
	function disconnectws() {
		client.disconnect(function() {
			var childNode=document.createTextNode("websocket已断开");
			var parent=document.getElementById("messages");
			parent.appendChild(childNode);
			parent.appendChild(document.createElement("br"));
		});
	}
</script>
</head>
<body>
	<table border="1">
		<tr>
			<td>请输入一个字符串（英文字母或数字）</td>
			<td><input type="text" id="wspath" /></td>
		</tr>
	</table>
	<input type="button" id="connectws" value="连接" onclick="connectws();" />
	<input type="button" id="disconnectws" value="断开"
		onclick="disconnectws();" />
	<div id="messages"></div>
</body>
</html>